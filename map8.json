{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  
  "width": "container",
  "height": 450,

  "params": [
    {
      "name": "zoom_level",
      "value": 130,
      "bind": {
        "input": "range",
        "min": 80,
        "max": 300,
        "step": 5,
        "name": "Zoom: "
      }
    },
    {
      "name": "center_to",
      "value": [0, 10],
      "bind": {
        "input": "select",
        "options": [
          [0, 10],
          [100, 20],
          [-90, 20],
          [30, -20]
        ],
        "labels": ["Global View", "Asia", "Americas", "Africa"],
        "name": "Map Centre: "
      }
    }
  ],

  "projection": {
    "type": "equalEarth",
    "center": {"expr": "center_to"},
    "scale": {"expr": "zoom_level"}
  },

  "data": {
    "url": "ne_110m.json",
    "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
  },

  "transform": [
    {
      "lookup": "properties.ISO_A3",
      "from": {
        "data": {"url": "plastic-waste-per-capita.csv"},
        "key": "Code",
        "fields": ["Entity", "Per capita plastic waste (kg/person/day)"]
      }
    }
  ],

  "mark": {
    "type": "geoshape",
    "stroke": "white",
    "strokeWidth": 0.5
  },

  "encoding": {
    "color": {
      "field": "Per capita plastic waste (kg/person/day)",
      "type": "quantitative",
      "scale": {
        "type": "threshold",
        "domain": [0.05, 0.1, 0.2, 0.4],
        "range": ["#fdbe85", "#fd8d3c", "#e6550d", "#a63603"]
      },
      "title": "kg/person/day"
    },
    "tooltip": [
      {"field": "Entity", "type": "nominal", "title": "Country"},
      {"field": "Per capita plastic waste (kg/person/day)", "type": "quantitative", "format": ".3f"}
    ]
  },
  "view": {"stroke": null}
}
